# TCP/IP

---

### 왜 TCP/IP라고 표현할까?
- TCP가 단독으로 동작하지 않고 IP와 결합되어 통신하기 때문이다.
  - **IP** : 패킷 통신 방식의 인터넷 프로토콜
    - 데이터를 전달하기 위한 주소 지정과 경로 설정을 담당한다.
    - 신뢰성이 없기 때문에 패킷 전달 여부를 보증하지 않고, 패킷을 보낸 순서와 받는 순서가 다를 수 있다.
  - **TCP** : 전송 제어 프로토콜
    - IP 위에서 동작하는 프로토콜로, 데이터의 전달을 보증하고 보낸 순서대로 받게 해 준다.
    - HTTP, FTP, SMTP 등 TCP를 기반으로 한 프로토콜들이 IP 위에서 동작하기 때문에 TCP/IP로 부르기도 한다.
- IP는 데이터 전송 경로를 정하고, TCP는 데이터를 안정적으로 전달하는 역할을 한다.
- 배달 시스템으로 비유하자면, 
  - IP는 어떤 주소로 가야 하는지 지정하는 **길 안내 시스템**
  - TCP는 패키지가 손상되지 않고 올바른 순서로 도착했는지 확인하고 문제가 있으면 재발송하는 **품질 관리 팀**
---
TCP는 OSI 7계층 중에서 3계층, 4계층을 다루는 프로토콜이다.

```
Transport Layer(4계층 -> 전송계층)
- 송신자와 수신자의 논리적 연결을 담당하는 부분
- 신뢰성 있는 연결 유지 가능
- Endpoint(사용자) 간의 연결을 생성하고 데이터를 얼마나 보내고, 얼마나 받았는지, 제대로 받았는지 등을 확인한다.
- TCP와 UDP가 대표적

Network Layer(3계층 -> 네트워크 계층)
- IP가 활용되는 부분으로, 한 Endpoint가 다른 Endpoint로 가고자 할 경우, 경로와 목적지를 찾아준다.
- 이를 Routing이라고 하며 대역이 다른 IP들이 목적지를 향해 제대로 찾아갈 수 있도록 돕는 역할을 한다.
```

### TCP
- 클라이언트와 서버가 연결된 상태에서 데이터를 주고 받는 프로토콜. 통신 선로가 고정되고, 모든 데이터는 고정된 통신 선로를 통해서 순차적으로 전달된다.
- 근거리 통신망이나 인트라넷, 인터넷에 연결된 컴퓨터에서 실행되는 프로그램 간에 일련의 옥텟을 안정적, 순서대로, 에러 없이 교환할 수 있게 한다.

TCP는 통신하고자 하는 양쪽 단말이 통신할 준비가 되었는지, 데이터가 제대로 전송되었는지, 데이터가 가는 도중 변질되지 않았는지, 수신자가 얼마나 받았고 빠진 부분은 없는지 등을 점검한다.

이런 정보는 TCP Header에 담겨 있으며 신뢰성 보장과 흐름 제어, 혼잡 제어에 관여할 수 있는 요소들도 포함되어 있다.

TCP Header를 제외한 TCP가 실을 수 있는 데이터 크기를 `세그먼트(Segment)`라고 부른다.
<blockquote>
TCP 세그먼트에는 IP 패킷의 출발지 IP와 목적지 IP 정보를 보완할 수 있는 출발지 port, 목적지 port, 전송 제어, 순서, 검증 정보등을 포함한다.
</blockquote>

- 연결 지향 프로토콜 : [TCP 3 way handshake(가상 연결)](3-way&4-way%20Handshake.md)
- 데이터 전달 보증
- 순서 보장
- 신뢰할 수 있는 프로토콜

TCP는 데이터를 정확하고 안정적으로 전달한다는 장점이 있지만, 데이터를 보내기 전에 반드시 연결이 형성되어야 하고, 고정된 통신 선로가 최단선이 아닐 경우 UDP 보다 전송 속도가 느릴 수 있다.