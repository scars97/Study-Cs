# 도메인

---

SI회사에 들어가서 1년 동안 4, 5개 프로젝트에 참여했다. 그리고 하고 있다.

생각해보면 꽤나 많은 프로젝트에 참여했던 것 같다. 

많은 프로젝트에 참여한 만큼 개발 실력도 그만큼 늘었냐.. 자신있게 말하진 못하겠다.<br>
항상 똑같은 개발 환경에서, 그리고 일정에 치이면서 진행했다보니 기능만 되는 코드를 작성하고 끝난 경우가 대부분이다.

그럼 프로젝트를 진행하면서 뭘 배웠나.

거의 같은 개발 환경이었지만 프로젝트의 서비스는 달랐는데<br>
택배 예약, 식권, 가전 제품 렌탈, 헬스케어 등 여러 도메인을 접했다.

도메인을 이해하고 개발했을 때와 그렇지 않았을 때에 발견되는 결함의 수, 업무 속도에서 차이가 났던 것 같다.

하지만 도메인을 정말 이해하고 개발을 했던 걸까?<br>
현재 내가 알고 있는 도메인이란 **어떤 서비스의 주제**이다. 

내가 알고 있는 도메인과 정의되어 있는 도메인은 어떻게 다를까.

---

### 도메인
**컴퓨터 프로그래밍으로 문제를 해결하기 위해 만들 소프트웨어 프로그램을 위한 요구사항, 용어, 기능을 정의하는 학문 영역**

해결하고자 하는 문제의 영역을 도메인이라 한다.

### 서브 도메인
- 도메인은 상위-하위 도메인을 나눌 수 있는데 서브(하위) 도메인은 상위 도메인을 더 작고 관리 가능한 부분으로 나눈 것.
- 각 서브 도메인은 특정 비즈니스 기능을 담당한다.

예를 들어, 택배 예약 서비스(상위 도메인)의 서브 도메인은 사용자 관리, 예약 관리, 배송 추적, 결제 처리 등이 될 수 있다.

### 도메인 모델
- 도메인의 주요 개념과 비즈니스 로직을 추상화한 모델

**Entity**
- 실제, 객체라는 의미를 담고 있으며, 업무에 필요하고 유용한 정보를 저장 및 관리하기 위한 집합적인 것이라고 볼 수 있다.
- 가장 큰 특징은 `식별자를 갖는 것`이다.
  - 내부 속성값들이 변경된다 하더라도 같은 객체로 인식하고 추적이 가능하다.
- 예로, 사용자(User), 택배(Parcel), 예약(Reserve), 배송(Delivery) 등이 엔티티가 될 수 있다.

**Value Object**
- 한 개 또는 그 이상의 속성들을 묶어서 특정 값을 나타내는 객체.
- `고유 식별자가 없다.`
  - 내부 속성 값 자체가 식별 값으로, 값이 바뀌면 다른 값이 되어 추적이 어렵다.
  - 복사될 때는 의도치 않은 객체들이 변경되는 문제를 유발한다.
  - 따라서 VO는 불변하게 만들어야 한다.

예약완료, 결제완료, 배송 중, 배송 완료의 값을 가지는 배송상태는 VO가 될 수 있다.<br>
VO는 값을 변경할 수 없는 불변 객체로 만들어져, 배송 상태값이 변경된다면 새로운 객체를 만들어야 한다. 

**Aggregate**
- 연관된 엔티티와 값 객체들의 묶음. Aggregate는 연관된 개별 객체를 묶어 만들어진다.
- Aggregate에 속한 객체는 유사하거나 동일 생명주기를 가진다.
  - 택배 예약 시, 예약 객체를 만들면서 예약자(User), 택배 정보(Parcel) 등의 객체를 함께 만든다.
- 각 Aggregate는 루트 엔티티를 가지는데, 이는 Aggregate 전체를 관리할 주체를 의미한다.
  - 루트는 Aggregate의 일관성이 깨지지 않도록 한다.
  - 루트가 아닌 다른 객체가 Aggregate에 속한 객체를 직접 변경하면 안된다.

예약(Reserve), 택배정보(Parcel), TrackingStatus(배송상태)를 포함하여 예약 생성, 상태 변경 같은 비즈니스 로직을 처리할 수 있다.

---

## 택배 예약 서비스 DDD

### User
- 회원
- 회원 등급

### Reserve
- 택배 예약
- 택배 정보
- 예약자(보내는 분)
- 수신자(받는 분)
- 예약 상태(예약 완료, 결제 완료, 예약 취소, 배송중, 배송 완료)

### Payment
- 결제